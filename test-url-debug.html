<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto; }
        .test-case { margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
        .url { font-family: monospace; background: #fff; padding: 8px; border: 1px solid #ccc; border-radius: 3px; word-break: break-all; margin: 5px 0; }
        .test-link { display: inline-block; margin: 5px 10px 5px 0; padding: 8px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; }
        .test-link:hover { background: #0056b3; }
        .expected { color: #28a745; font-weight: bold; }
        h3 { color: #dc3545; margin-top: 0; }
        .debug { background: #fff3cd; border: 1px solid #ffeeba; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>URL Debug Test for Academic Explorer</h1>
    <p><strong>Server:</strong> http://localhost:3001</p>
    
    <div class="test-case">
        <h3>Test: Raw URL (this should fail)</h3>
        <div class="url">http://localhost:3001/#/https://openalex.org/A5017898742</div>
        <a class="test-link" href="http://localhost:3001/#/https://openalex.org/A5017898742" target="_blank">Test Raw URL</a>
        <div class="debug">
            <strong>Problem:</strong> The URL contains slashes and special characters that conflict with hash routing.
        </div>
    </div>

    <div class="test-case">
        <h3>Test: URL Encoded (this should work)</h3>
        <div class="url">http://localhost:3001/#/https%3A%2F%2Fopenalex.org%2FA5017898742</div>
        <a class="test-link" href="http://localhost:3001/#/https%3A%2F%2Fopenalex.org%2FA5017898742" target="_blank">Test Encoded URL</a>
        <div class="debug">
            <strong>Solution:</strong> URL encode the OpenAlex URL part.
        </div>
    </div>

    <div class="test-case">
        <h3>Test: Bare OpenAlex ID (should work)</h3>
        <div class="url">http://localhost:3001/#/A5017898742</div>
        <a class="test-link" href="http://localhost:3001/#/A5017898742" target="_blank">Test Bare ID</a>
    </div>

    <div class="test-case">
        <h3>Test: Authors route with encoded URL (should work)</h3>
        <div class="url">http://localhost:3001/#/authors/https%3A%2F%2Fopenalex.org%2FA5017898742</div>
        <a class="test-link" href="http://localhost:3001/#/authors/https%3A%2F%2Fopenalex.org%2FA5017898742" target="_blank">Test Authors + Encoded</a>
    </div>

    <div class="test-case">
        <h3>Reference: Direct Link (should work)</h3>
        <div class="url">http://localhost:3001/#/authors/A5017898742</div>
        <a class="test-link" href="http://localhost:3001/#/authors/A5017898742" target="_blank">Direct Link</a>
    </div>

    <script>
        // Show URL encoding examples
        console.log('URL Encoding Examples:');
        console.log('Raw:', 'https://openalex.org/A5017898742');
        console.log('Encoded:', encodeURIComponent('https://openalex.org/A5017898742'));
        console.log('Raw ORCID:', 'https://orcid.org/0000-0003-1613-5981');
        console.log('Encoded ORCID:', encodeURIComponent('https://orcid.org/0000-0003-1613-5981'));
    </script>
</body>
</html>