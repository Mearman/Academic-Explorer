# custom/barrelsby-header

Enforces that `index.ts` files in barrelsby-managed directories have the standard barrelsby header comment.

## Why

Barrelsby's `--delete` option only recognizes and deletes files that contain its standard header marker (`@file Automatically generated by barrelsby.`). Without this header, barrelsby will include the existing index.ts as a module to export, creating self-referencing exports like `export * from "./index"` which causes infinite import loops.

## Rule Details

This rule checks:
- Only `index.ts` files (not other files)
- Only in directories managed by barrelsby (defined in `.barrelsby.json`)
- For the presence of the barrelsby header marker

### Fail

```typescript
// packages/client/src/unpaywall/index.ts

// Custom header - barrelsby won't recognize this
/**
 * Unpaywall API exports
 */
export * from "./client";
export * from "./types";
```

### Pass

```typescript
// packages/client/src/unpaywall/index.ts

/**
 * @file Automatically generated by barrelsby.
 */

export * from "./client";
export * from "./types";
```

## Auto-fix

This rule supports the `--fix` option. Running `eslint --fix` will automatically add or correct the barrelsby header.

## Configuration

The rule is enabled by default in `eslint.config.base.ts`:

```typescript
rules: {
    "custom/barrelsby-header": "error",
}
```

## Barrelsby Directories

The rule applies to index.ts files in the following directories (from `.barrelsby.json`):

- `packages/algorithms/src`
- `packages/client/src`
- `packages/types/src`
- `packages/ui/src`
- `packages/utils/src`
- `apps/web/src/components`
